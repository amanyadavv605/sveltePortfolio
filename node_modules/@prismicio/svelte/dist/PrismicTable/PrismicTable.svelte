<script>import { isFilled } from "@prismicio/client";
import {} from "svelte";
import PrismicRichText from "../PrismicRichText/PrismicRichText.svelte";
import DefaultComponent from "./DefaultComponent.svelte";
export let field;
export let components = {};
export let fallback = void 0;
const createComponent = (type) => {
  const Component = components[type] ?? DefaultComponent;
  return {
    Component,
    props: Component === DefaultComponent ? { type } : {}
  };
};
const { Component: Table, props: tableProps } = createComponent("table");
const { Component: Thead, props: theadProps } = createComponent("thead");
const { Component: Tbody, props: tbodyProps } = createComponent("tbody");
const { Component: Tr, props: trProps } = createComponent("tr");
const { Component: Th, props: thProps } = createComponent("th");
const { Component: Td, props: tdProps } = createComponent("td");
</script>

<!-- This formatting is intentional to prevent unwanted whitespace between elements. -->
{#if isFilled.table(field)}
	<Table {...tableProps} table={field}>
		{#if field?.head}
			<Thead {...theadProps} head={field.head}>
				{#each field.head.rows as row (row.key)}
					<Tr {...trProps} {row}>
						{#each row.cells as cell (cell.key)}
							<Th {...thProps} {cell}>
								<PrismicRichText field={cell.content} {components} /></Th
							>{/each}</Tr
					>{/each}</Thead
			>{/if}<Tbody {...tbodyProps} body={field.body}>
			{#each field.body.rows as row (row.key)}
				<Tr {...trProps} {row}>
					{#each row.cells as cell (cell.key)}
						{#if cell.type === "header"}
							<Th {...thProps} {cell}>
								<PrismicRichText field={cell.content} {components} /></Th
							>{:else}<Td {...tdProps} {cell}>
								<PrismicRichText field={cell.content} {components} /></Td
							>{/if}{/each}</Tr
				>
			{/each}
		</Tbody>
	</Table>
{:else if fallback !== undefined}
	<svelte:component this={fallback} />
{/if}
