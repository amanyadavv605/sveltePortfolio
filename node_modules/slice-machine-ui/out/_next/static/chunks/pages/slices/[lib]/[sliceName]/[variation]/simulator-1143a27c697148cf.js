(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{30755:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/slices/[lib]/[sliceName]/[variation]/simulator",function(){return n(96562)}])},44570:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5632),i=n(56580),o=n(68916);let s=(e,t,n)=>{var r;let i=null===(r=(0,o.Sd)(e))||void 0===r?void 0:r.find(e=>e.name.replace(/\//g,"--")===t);return null==i?void 0:i.components.find(e=>e.model.name===n)};var l=()=>{let e=(0,r.useRouter)(),{slice:t}=(0,i.v9)(t=>({slice:s(t,e.query.lib,e.query.sliceName)}));if(!t)return{};let n=t.model.variations.find(t=>t.id===e.query.variation);return n?{slice:t,variation:n}:{}}},47861:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(52322),i=n(2784),o=n(75289);let s=(e,t)=>e?"".concat(e,"-").concat(t):"",l=e=>{switch(e){case"white":case"secondaryMedium":case"secondarySmall":case"secondary":return"#1A1523";default:return"grey01"}},a=(0,i.forwardRef)((e,t)=>{let{label:n,Icon:i,type:a,form:c,isLoading:d=!1,disabled:u=!1,onClick:x,sx:h={},iconSize:p=16,iconFill:m,variant:g="primary",...f}=e;return(0,r.jsx)(o.zx,{ref:t,sx:{...h,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",...d?{cursor:"wait !important"}:{}},type:a,form:c,disabled:u||d,onClick:d?void 0:x,variant:g,...f,children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.$j,{size:p,color:l(g),"data-testid":s(f["data-testid"],"spinner")}),i&&n]}):(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{size:p,fill:m,"data-testid":s(f["data-testid"],"icon")}),n]})})})},76805:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},W:function(){return a}});var r=n(52322),i=n(2784),o=n(75289);let s=e=>{let{bg:t,background:n,sx:i,withRadius:s,radius:l,children:a}=e;return(0,r.jsx)(o.xu,{sx:{p:4,bg:t||n,...s?{borderBottomLeftRadius:l,borderBottomRightRadius:l}:null,...i},children:a})},l=(0,i.createContext)("6px"),a=()=>(0,i.useContext)(l),c=e=>{let{Header:t=null,SubHeader:n=null,Body:i=null,Footer:a=null,borderFooter:c=!1,radius:d="6px",bodySx:u={},footerSx:x={},sx:h=null,bg:p,background:m,children:g,...f}=e;return(0,r.jsx)(l.Provider,{value:d,children:(0,r.jsxs)(o.Zb,{sx:{border:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.borders))},borderRadius:d,...h},...f,children:[t||null,n||null,(0,r.jsxs)(s,{bg:p,background:m,sx:u,withRadius:!a,children:[i?(0,r.jsx)(i,{}):null,g||null]}),a?(0,r.jsx)(s,{bg:p,background:m,sx:{...c?{borderTop:e=>{let{colors:t}=e;return"1px solid ".concat(String(null==t?void 0:t.borders))}}:null,...x},radius:d,withRadius:!0,children:"object"==typeof a?a:(0,r.jsx)(a,{})}):null]})})}},23240:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var r=n(52322),i=n(2784),o=n(65186),s=n(75289);let l=(0,i.memo)(e=>{let{src:t}=e;return(0,r.jsx)(s.Ee,{src:t,alt:"Preview image",sx:{maxHeight:"100%"}})}),a=e=>{let{src:t,sx:n}=e;return(0,r.jsx)(s.kC,{sx:{position:"relative",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundImage:"url(/pattern.png)",backgroundColor:"headSection",backgroundRepeat:"repeat",backgroundSize:"20px",borderRadius:"4px",...n},children:void 0!==t?(0,r.jsx)(l,{src:t}):(0,r.jsxs)(s.xv,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(o.eJU,{}),"You have no screenshot yet."]})})}},96562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return er}});var r,i,o=n(52322),s=n(97729),l=n.n(s),a=n(5632),c=n.n(a),d=n(44570),u=n(25966),x=n(7729),h=n(25242),p=n(25865),m=n(14010),g=n(2784),f=n(56580),v=n(88932),b=n(75289),j=n(65077),C=n(93188),k=n(30988),w=function(e,t,n){let[r,i]=(0,g.useState)(e()),o=(0,g.useRef)(Date.now());return(0,g.useEffect)(()=>{let n=setTimeout(function(){Date.now()-o.current>=t&&(i(e()),o.current=Date.now())},t-(Date.now()-o.current));return()=>{clearTimeout(n)}},[t,...n]),r},S=n(76805),y=n(23240),E=n(11104),R=n(27078),D=n(46962),I=n(41067),z=e=>{let{sliceName:t,screenshotUrl:n}=e,{isScreenshotModalOpen:r}=(0,f.v9)(e=>({isScreenshotModalOpen:(0,R.gP)(e,D.q.SCREENSHOT_PREVIEW)})),{closeModals:i}=(0,I.Z)();return(0,o.jsx)(E.Z,{isOpen:r,shouldCloseOnOverlayClick:!0,contentLabel:"Screenshot Preview",portalClassName:"ScreenshotPreviewModal",onRequestClose:i,children:(0,o.jsx)(S.Z,{radius:"0px",bodySx:{p:0,bg:"#FFF",position:"relative",height:"100%",padding:16},footerSx:{position:"sticky",bottom:0,p:0},sx:{border:"none"},Header:(0,o.jsxs)(b.kC,{sx:{position:"sticky",top:0,zIndex:1,p:"16px",alignItems:"center",justifyContent:"space-between",borderBottom:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.borders))}},children:[(0,o.jsxs)(b.X6,{sx:{fontSize:"14px"},children:["Screenshot Preview for ",t]}),(0,o.jsx)(b.x8,{type:"button",onClick:()=>i()})]}),Footer:()=>(0,o.jsx)(b.kC,{style:{justifyContent:"flex-end",height:64,alignItems:"center",paddingRight:16,borderTop:"1px solid #DCDBDD"},children:(0,o.jsx)(b.zx,{variant:"secondary",sx:{fontWeight:600},onClick:()=>i(),children:"Close"})}),children:(0,o.jsx)(y.q,{src:n,sx:{height:"320px"}})})})},O=n(80410),T=n(79546);let M=e=>({__TYPE__:"SharedSliceContent",variation:e,primary:{},items:[]});var W=n(85819),_=n(87648),P=n(47861),N=e=>{let{children:t,sx:n}=e;return(0,o.jsx)(b.kC,{sx:{bg:"grey07",height:"90%",width:"100%",justifyContent:"center",alignItems:"center",zIndex:"1",...n},children:(0,o.jsx)(b.kC,{sx:{marginTop:"-128px",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:t})})},F=e=>{let{onRetrigger:t}=e,n=(0,_.k)();return(0,o.jsxs)(N,{children:[(0,o.jsx)(b.Ee,{src:"/iframe-not-running.png",sx:{width:"320px"}}),(0,o.jsxs)(b.xv,{sx:{color:"textClear",mb:2,fontSize:"14px",lineHeight:"24px",fontWeight:"600"},children:["Slice Machine can't render your ",n.value]}),(0,o.jsxs)(b.xv,{sx:{color:"failedConnectText",maxWidth:"400px",textAlign:"center",fontSize:"12px",lineHeight:"22px"},children:["Ensure your website's development server is running by typing",(0,o.jsx)("br",{}),(0,o.jsx)(b.xv,{as:"code",variant:"styles.inlineCode",sx:{padding:"4px",borderRadius:"6px"},children:"npm run dev"}),"\xa0 in your terminal at the root of your website directory.",(0,o.jsx)("br",{})," If that doesn't work, see the\xa0",(0,o.jsx)(b.rU,{target:"_blank",href:"https://prismic.io/docs/slice-machine#simulate-slices",sx:{color:"link"},children:"troubleshooting instructions."})]}),(0,o.jsx)(P.z,{onClick:t,label:"Refresh",Icon:W.Fer,iconSize:20,iconFill:"#6F6E77",variant:"secondaryMedium",sx:{mt:"16px"}})]})},L=e=>(0,o.jsxs)("svg",{viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.3304 19.693C50.9182 18.9787 50.2527 18.6526 50.2527 18.6526L64.7906 10.2077C65.5266 9.78011 66.4679 10.0339 66.8929 10.7745C67.3179 11.5151 67.0657 12.4622 66.3294 12.8898L52.639 20.8424C52.639 20.8424 51.7428 20.4072 51.3304 19.693Z",fill:"current"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.6775 54.7814C58.0794 48.7394 61.6433 35.3572 55.6378 24.8917C54.7801 23.397 53.7736 22.0427 52.6481 20.8367L32.9428 32.2832C32.2068 32.7108 31.2655 32.457 30.8405 31.7165C30.4155 30.9757 30.6677 30.0287 31.4039 29.6011L50.2693 18.6425C43.486 13.2668 33.8645 12.2736 25.9299 16.8827C15.5282 22.9249 11.9642 36.3071 17.9697 46.7727C18.8274 48.2671 19.8339 49.6216 20.9595 50.8276L41.1791 39.0822C41.9151 38.6546 42.8564 38.9086 43.2814 39.6492C43.7064 40.3897 43.4542 41.3368 42.7182 41.7644L23.3384 53.0217C30.1217 58.3975 39.7432 59.3906 47.6775 54.7814Z",fill:"current"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.20645 61.7656C4.78145 61.0248 5.03367 60.078 5.76978 59.6502L20.9371 50.8398C20.9371 50.8398 21.8578 51.2406 22.3053 51.7062C22.7528 52.1717 23.361 53.0078 23.361 53.0078L7.30887 62.3323C6.57274 62.7599 5.63144 62.5061 5.20645 61.7656Z",fill:"current"})]}),A=n(75100),B=n(19909),U=e=>{let{defaultValue:t,variations:n,MenuItemAction:r,onChange:i}=e;return(0,o.jsxs)(b.xu,{sx:{py:0,flexDirection:"column",backgroundColor:"headSection",overflow:"auto",display:"flex",borderRadius:"4px",border:e=>{var t;return"1px solid ".concat(null===(t=e.colors)||void 0===t?void 0:t.borders)},boxShadow:"0 10px 10px rgba(0, 0, 0, 0.05)",maxHeight:340,minWidth:250,maxWidth:350,color:"text"},children:[(0,o.jsxs)(b.xv,{sx:{p:3,fontSize:12,color:"textClear"},children:[n.length," VARIATION",n.length>1?"S":""]}),(0,o.jsxs)(b.kC,{sx:{p:0,flexDirection:"column"},children:[n.map(e=>(0,o.jsx)(H,{value:e,isActive:e.id===t.id,onClick:i},e.id)),r||null]})]})};let H=e=>{let{value:t,isActive:n,onClick:r}=e;return(0,o.jsx)(b.xu,{sx:{px:3,py:2,color:n?"primary":"",cursor:"pointer",borderLeft:e=>{let{colors:t}=e;return"2px solid ".concat(n?null==t?void 0:t.primary:null==t?void 0:t.background)},borderRadius:0,bg:"background",":hover":{bg:"hoverBackground",borderLeft:e=>{let{colors:t}=e;return"2px solid ".concat(null==t?void 0:t.primary)}}},onClick:()=>r(t),children:t.name})};var Z=e=>{let{buttonSx:t,defaultValue:n,variations:r,onNewVariation:i,onChange:s,sx:l,disabled:a}=e,[c,d]=(0,g.useState)(!1),[u,x]=(0,g.useState)(n||r[0]);(0,g.useEffect)(()=>{n&&x(n)},[n]);let h=function(e){d(!1),x(e),setTimeout(()=>s(e),210)},p=(0,o.jsx)(b.xu,{sx:{p:2},children:(0,o.jsx)(b.zx,{variant:"transparent",sx:{color:"text"},onClick:()=>{d(!1),i&&i()},children:"+ Add new variation"})});return(0,o.jsx)(b.xu,{sx:l,children:(0,o.jsx)(B.Popover,{align:"start",isOpen:c,onClickOutside:()=>d(!1),positions:["bottom"],padding:10,content:()=>(0,o.jsx)(U,{defaultValue:u,variations:r,onChange:h,MenuItemAction:i?p:void 0}),containerClassName:"variationSelectorContainer",children:(0,o.jsxs)(b.zx,{sx:{...t},variant:"dropDownButton",onClick:()=>d(!c),disabled:a,children:[u.name," ",c?(0,o.jsx)(A.bOz,{size:"16px","aria-label":"Collapse variations"}):(0,o.jsx)(A.mEq,{size:"16px","aria-label":"Expand variations"})]})})})};let q=(e,t,n)=>{if(!t){c().push("/".concat(e.href,"/").concat(e.model.name));return}let r=function(e){let{lib:t,sliceName:n,variationId:r,options:i={},isSimulator:o}=e,s="/slices/[lib]/[sliceName]/[variation]".concat(o?"/simulator":""),l="/slices/".concat(t,"/").concat(n,"/").concat(r).concat(o?"/simulator":"");return{href:s,as:l,options:i,all:[s,l,i]}}({lib:e.href,sliceName:e.model.name,variationId:null==t?void 0:t.id,isSimulator:n});c().push(r.href,r.as,r.options)};var V=e=>{let{slice:t,variation:n,isDisplayEditor:r,toggleIsDisplayEditor:i,onSaveMock:s,actionsDisabled:l,isSavingMock:a}=e;return(0,o.jsxs)(b.kC,{sx:{p:"16px",display:"flex",bg:"grey07",gridTemplateRows:"1fr",borderBottom:"1px solid #DCDBDD",justifyContent:"space-between"},children:[(0,o.jsxs)(b.kC,{sx:{alignItems:"center"},children:[(0,o.jsx)(L,{height:"20px",width:"20px",fill:"#1A1523"}),(0,o.jsx)(b.xv,{sx:{ml:2,mr:"12px",fontSize:"14px",color:"#1A1523",fontWeight:"600",letterSpacing:"-0.15px"},children:t.model.name}),(0,o.jsx)(Z,{defaultValue:n,variations:t.model.variations,onChange:e=>q(t,e,!0),disabled:t.model.variations.length<=1||l})]}),(0,o.jsxs)(b.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsx)(b.kC,{sx:{alignItems:"center",justifyContent:"space-around"},children:(0,o.jsxs)(b.kC,{sx:{alignItems:"center",mr:4},children:[(0,o.jsx)(b.__,{htmlFor:"show-mock-editor",sx:{color:"#6F6E77",lineHeight:"16px",fontSize:"12px",fontWeight:"600",letterSpacing:"0px"},children:"Editor"}),(0,o.jsx)(b.rs,{id:"show-mock-editor",checked:r,onChange:i,disabled:l})]})}),(0,o.jsx)(P.z,{"data-testid":"save-mock",onClick:s,label:"Save mock content",disabled:a||l,variant:"primary",sx:{borderRadius:"6px",color:"#F1EEFE",fontWeight:"bold",border:"1px solid #5842C3",backgroundColor:"#6E56CF",boxShadow:"0px 1px 0px rgba(0, 0, 0, 0.04)","&:hover":{"&:not([disabled])":{backgroundColor:"#5842C3"}}}})]})]})},X=n(16),K=e=>{let{apiContent:t,screenDimensions:n,simulatorUrl:r,dryRun:i=!1,isScreenshot:s=!1,handleSimulatorConnectionResult:l}=e,[a,c]=function(){let[e,t]=(0,g.useState)(),n=(0,g.useRef)(),r=(0,g.useRef)();return[e,(0,g.useCallback)(async e=>{var i,o;if(null===(i=n.current)||void 0===i||i.disconnect(),null===(o=r.current)||void 0===o||o.disconnect(),t(void 0),null!=e){n.current=new X.SH(e);try{await n.current.connect(),t(n.current);let i=async()=>{var e;t(void 0),await (null===(e=n.current)||void 0===e?void 0:e.connect({},!0)),t(n.current)};r.current=new MutationObserver(e=>{e.forEach(e=>{"src"===e.attributeName&&i().catch(e=>{throw e})})}),r.current.observe(e,{attributeFilter:["src"]})}catch(e){console.error(e)}}},[])]}();(0,g.useEffect)(()=>{if(!r){l("failed");return}if(void 0!==a){if(!a.connected){l("failed"),console.warn("Trying to use a disconnected simulator client.");return}(async()=>{await a.setSliceZone([t])})().then(()=>{l("successful")}).catch(()=>{l("failed")})}},[a,t,r]);let[d,u]=(0,g.useState)(),x=function(e,t){let n=(0,g.useRef)();return(0,g.useCallback)(t=>{var r;null===(r=n.current)||void 0===r||r.disconnect(),null!==t&&(n.current=new ResizeObserver(n=>{let[r]=n,{height:i,width:o}=r.contentRect;e({blockSize:i,inlineSize:o},t)}),n.current.observe(t))},t)}(e=>{let{blockSize:t,inlineSize:n}=e;u({height:t,width:n})},[]);return(0,o.jsx)(b.kC,{ref:x,sx:{alignItems:"center",backgroundColor:"headSection",backgroundImage:"url(/pattern.png)",backgroundRepeat:"repeat",backgroundSize:"10px",border:s?void 0:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.darkBorder))},borderRadius:s?void 0:8,display:"flex",height:"100%",justifyContent:"center",overflow:"hidden",...i?{display:"none"}:{}},children:r?(0,o.jsx)("iframe",{ref:c,src:r,style:{border:"none",maxHeight:"".concat(n.height,"px"),maxWidth:"".concat(n.width,"px"),minHeight:"".concat(n.height,"px"),minWidth:"".concat(n.width,"px"),overflowY:"auto",...d?{transform:"scale(".concat(function(e,t){let{height:n,width:r}=e,{height:i,width:o}=t;return r>o||n>i?r-o>n-i?o/r:i/n:1}(n,d),")")}:{display:"none"}}}):null})},Y=e=>{let{defaultValue:t,options:n,onChange:r}=e;return(0,o.jsx)(b.xu,{sx:{py:0,flexDirection:"column",backgroundColor:"headSection",overflow:"auto",display:"flex",borderRadius:"6px",border:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.darkBorder))},boxShadow:"0 10px 10px rgba(0, 0, 0, 0.05)",maxHeight:340,minWidth:180,maxWidth:350,color:"text"},children:(0,o.jsx)(b.kC,{sx:{p:0,flexDirection:"column"},children:n.map(e=>(0,o.jsx)(J,{value:e,isActive:e===t,onClick:r}))})})};let J=e=>{let{value:t,isActive:n,onClick:r}=e;return(0,o.jsx)(b.xu,{sx:{p:2,cursor:"pointer",fontSize:"14px",borderRadius:0,bg:n?"hoverBackground":"background",":hover":{bg:"hoverBackground"}},onClick:()=>r(t),children:t})},$=e=>{let{buttonSx:t,currentValue:n,options:r,onChange:i,disabled:s}=e,[l,a]=(0,g.useState)(!1),c=function(e){a(!1),setTimeout(()=>i(e),210)};return(0,o.jsx)(b.xu,{children:(0,o.jsx)(B.Popover,{align:"start",isOpen:l,onClickOutside:()=>a(!1),positions:["bottom"],padding:2,content:()=>(0,o.jsx)(Y,{defaultValue:n,options:r,onChange:c}),children:(0,o.jsxs)(b.zx,{sx:t,variant:"dropDownButton",onClick:()=>a(!l),disabled:s,children:[n," ",l?(0,o.jsx)(A.bOz,{size:"24px"}):(0,o.jsx)(A.mEq,{size:"24px"})]})})})};(r=i||(i={})).DESKTOP="Desktop",r.TABLET="Tablet",r.MOBILE="Mobile",r.CUSTOM="Custom";let Q={Desktop:{width:1280,height:800},Tablet:{width:1080,height:810},Mobile:{width:390,height:844}},G=e=>{let{label:t,startValue:n,onChange:r,sx:i,disabled:s}=e,l=["e","-","+",",","."];return(0,o.jsxs)(b.kC,{sx:{alignItems:"center",...i},children:[(0,o.jsx)(b.__,{sx:{backgroundColor:"grey07",border:"transparent",borderRight:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.darkBorder))},borderRadius:"6px 0px 0px 6px",width:26,height:30,color:"greyIcon",fontWeight:"bold",fontSize:"14px",alignItems:"center",justifyContent:"center",position:"absolute",ml:"1px"},htmlFor:"".concat(t,"-screensize-input"),children:t}),(0,o.jsx)(b.II,{type:"number",name:"".concat(t,"-screensize-input"),disabled:s,sx:{width:80,height:32,p:0,border:"1px solid #E4E2E4",borderRadius:"6px","&::-webkit-outer-spin-button,&::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},color:"greyIcon",textAlign:"center",paddingLeft:26,"&:disabled":{cursor:"not-allowed","&:hover":{border:"1px solid #E4E2E4"},"&:active":{border:"1px solid #E4E2E4",boxShadow:"none"}}},onChange:r,value:n,min:"0",onKeyDown:e=>{l.includes(e.key)&&e.preventDefault()}})]})},ee=e=>{let{handleScreenSizeChange:t,screenDimensions:n,actionsDisabled:r}=e,[s,l]=(0,g.useState)(i.DESKTOP),a=e=>{let n=Object.values(Q).findIndex(t=>JSON.stringify(t)===JSON.stringify(e));l(n<0?i.CUSTOM:Object.keys(Q)[n]),t(e)};return(0,o.jsx)(b.kC,{sx:{alignItems:"center",pb:"16px",justifyContent:"space-between",variant:"small"},children:(0,o.jsxs)(b.kC,{sx:{alignItems:"center",flex:1},children:[(0,o.jsx)($,{options:Object.values(i),onChange:e=>{l(e),e!==i.CUSTOM.toString()&&t(Q[e])},buttonSx:{alignSelf:"start"},currentValue:s,disabled:r}),(0,o.jsx)(G,{label:"W",startValue:n.width.toString(),onChange:e=>{a({...n,width:Number(e.target.value)})},disabled:r,sx:{mx:2}}),(0,o.jsx)(A.eSQ,{size:16,color:"#6F6E77"}),(0,o.jsx)(G,{label:"H",startValue:n.height.toString(),onChange:e=>{a({...n,height:Number(e.target.value)})},disabled:r,sx:{ml:2}})]})})},et=new p.S;var en=e=>{var t,n;let{slice:r,variation:s}=e,{updateSliceMockSuccess:l}=(0,I.Z)(),{simulatorUrl:a,endpoints:c}=(0,f.v9)(e=>({simulatorUrl:(0,T.x0)(e),endpoints:(0,T.gZ)(e)})),d=(0,g.useMemo)(()=>({embedApiEndpoint:new URL(c.PrismicEmbed),authStrategy:"cookie",unsplashApiBaseUrl:new URL(c.PrismicUnsplash),baseUrl:new URL("builder/",c.PrismicWroom)}),[c.PrismicEmbed,c.PrismicUnsplash,c.PrismicWroom]);(0,g.useEffect)(()=>{C.Xe.track({event:"slice-simulator:open"})},[]);let p=(0,g.useRef)(!1);(0,g.useEffect)(()=>{p.current=!0},[]);let S=e=>{p.current&&(p.current=!1,C.Xe.track({event:"editor:widget-used",sliceId:e}))},[y,E]=(0,g.useState)("waiting");(0,g.useEffect)(()=>{if("waiting"===y){let e=setTimeout(()=>{E("failed")},2e4);return()=>clearTimeout(e)}},[y]);let R=e=>{"waiting"===y&&("failed"===e?C.Xe.track({event:"slice-simulator:is-not-running"}):Z(!0),E(e))},[D,W]=(0,g.useState)(Q[i.DESKTOP]),_=(0,g.useMemo)(()=>O.id.fromSM(r.model),[r.model]),[P,L]=(0,g.useState)(null),A=(0,g.useMemo)(()=>{var e;return(null==P?void 0:P.variation)===s.id?P:(null===(e=r.mocks)||void 0===e?void 0:e.find(e=>e.variation===s.id))||M(s.id)},[P,s.id]),B=(0,g.useMemo)(()=>(0,h.renderSliceMock)(_,A).id,[]),U=w((0,g.useCallback)(()=>()=>({...(0,h.renderSliceMock)(_,A),id:B}),[_,A]),800,[_,A]),[H,Z]=(0,g.useState)(!1),[q,X]=(0,g.useState)(!1),Y=async()=>{if(P){X(!0);try{var e;let t={libraryID:r.from,sliceID:r.model.id,mocks:(null!==(e=r.mocks)&&void 0!==e?e:[]).filter(e=>e.variation!==P.variation).concat(P)},{errors:n}=await (0,C.y3)(t);if(n.length>0)throw n;l(t),v.Am.success("Saved")}catch(e){console.error("Error while saving mock",e),v.Am.error("Error saving content")}X(!1)}};return(0,o.jsxs)(b.kC,{sx:{flexDirection:"column",height:"100vh"},children:[(0,o.jsx)(V,{slice:r,variation:s,isDisplayEditor:H,actionsDisabled:"successful"!==y,toggleIsDisplayEditor:()=>Z(!H),onSaveMock:()=>void Y(),isSavingMock:q}),(0,o.jsx)(b.xu,{sx:{flex:1,bg:"grey07",p:3,display:"flex",flexDirection:"column",height:"calc(100% - 73px - 16px)"},children:(0,o.jsxs)(b.kC,{sx:{flex:1,flexDirection:"row",position:"relative",width:"100%",height:"100%"},children:[(0,o.jsxs)(j.xR,{sx:{display:"flex",height:"100%",flexDirection:"column",flex:1,minWidth:0},children:[(0,o.jsx)(ee,{handleScreenSizeChange:W,screenDimensions:D,actionsDisabled:"successful"!==y}),"failed"===y?(0,o.jsx)(F,{onRetrigger:()=>{E("waiting")}}):null,"successful"===y?(0,o.jsx)(K,{apiContent:U,screenDimensions:D,simulatorUrl:a,handleSimulatorConnectionResult:R}):(0,o.jsx)(o.Fragment,{children:"waiting"===y?(0,o.jsxs)(N,{children:[(0,o.jsx)(b.$j,{variant:"styles.spinner"}),(0,o.jsx)(K,{apiContent:U,screenDimensions:D,simulatorUrl:a,dryRun:!0,handleSimulatorConnectionResult:R})]}):null})]}),"successful"===y&&H?(0,o.jsx)(b.kC,{className:"editor",sx:{flexDirection:"column",marginLeft:"16px",maxWidth:"440px",minWidth:"440px",overflowY:"auto"},children:(0,o.jsx)(k.S,{renderError:()=>(0,o.jsx)(x.Iq8,{title:"Editor error",description:"An error occurred while rendering the editor."}),children:(0,o.jsx)(g.Suspense,{children:(0,o.jsx)(m.aH,{client:et,children:(0,o.jsx)(u.kS,{config:d,content:A,onContentChange:e=>{L(e),S(r.model.id)},sharedSlice:_},s.id)})})})}):null]})}),!!(null===(t=r.screenshots[s.id])||void 0===t?void 0:t.url)&&(0,o.jsx)(z,{sliceName:r.model.name,screenshotUrl:null===(n=r.screenshots[s.id])||void 0===n?void 0:n.url})]})};function er(){let e=(0,a.useRouter)(),{slice:t,variation:n}=(0,d.Z)();return void 0===t||void 0===n?(e.replace("/"),null):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l(),{children:(0,o.jsx)("title",{children:"Simulator: ".concat(t.model.name," - Slice Machine")})}),(0,o.jsx)(en,{slice:t,variation:n})]})}}},function(e){e.O(0,[789,872,157,888,774,179],function(){return e(e.s=30755)}),_N_E=e.O()}]);