(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{28574:function(e,t,n){"use strict";n.d(t,{R$:function(){return i},Qj:function(){return h},T9:function(){return d},nf:function(){return x},u2:function(){return o},_T:function(){return u}});var l=n(52322),r=n(7729),a=n(6277),s=n(43217),c=n.n(s);let i=e=>{let{backgroundImage:t,style:n,...r}=e,s=void 0!==t;return(0,l.jsx)("article",{...r,className:(0,a.W)(c().root,{[c().withBackground]:s}),style:{backgroundImage:s?"url(".concat(t,")"):void 0,...n}})},o=e=>(0,l.jsx)("div",{...e,className:c().image}),d=e=>(0,l.jsx)("div",{...e,className:c().content}),u=e=>(0,l.jsx)(r.xvT,{...e,variant:"h3"}),x=e=>(0,l.jsx)(r.xvT,{...e,color:"grey11"}),h=e=>(0,l.jsx)("div",{...e,className:c().actions,color:"grey"})},5726:function(e,t,n){"use strict";n.d(t,{F:function(){return Y}});var l=n(52322),r=n(7729),a=n(97729),s=n.n(a),c=n(2784),i=n(23335),o=n(30988),d=n(77507),u=n(5335),x=n(5632),h=n(56580),p=n(75289),j=n(93216),m=n(88932),g=n(93188),f=n(91133);async function v(e){let{id:t,label:n,repeatable:l,format:r,onSuccess:a}=e,s=d.$[r],c=(0,j.Ue)({id:t,label:n,repeatable:l,format:r});try{let{errors:e}=await (0,g.KA)(c);if(e.length>0)throw e;g.Xe.track({event:"custom-type:created",id:c.id,name:n,format:r,type:l?"repeatable":"single",origin:"table"}),await a(c),m.Am.success((0,f.GX)({message:"".concat(s.name({start:!0,plural:!1})," saved successfully at "),path:"./customtypes/".concat(c.id,"/index.json")}))}catch(t){let e="Internal Error: ".concat(s.name({start:!0,plural:!1})," not saved");console.error(e,t),m.Am.error(e)}}var b=n(63447),S=n(65856),_=n(80546),y=n(1490),C=n(17186),k=n(99510),w=n(40572),T=n(41067),I=n(28801),R=n(63397);let B=e=>{let{selected:t,...n}=e;return(0,l.jsx)(p.kC,{sx:{p:"24px",mb:3,alignItems:"top",cursor:"pointer",borderRadius:"6px",backgroundColor:"grayLight",boxShadow:t?e=>{var t;return"0 0 0 2px ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.primary))}:"none","&:hover":{boxShadow:e=>{var t;return"0 0 0 2px ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.primary))}}},...n})},L=e=>{let{format:t}=e,[n,,r]=(0,R.U$)("repeatable"),a=d.$[t];return(0,l.jsxs)(p.xu,{mb:2,children:[(0,l.jsxs)(B,{selected:n.value,onClick:()=>r.setValue(!0),children:[(0,l.jsx)(p.Y8,{checked:n.value,onChange:()=>{},"data-testid":"repeatable-type-radio-btn"}),(0,l.jsxs)(p.xu,{sx:{marginLeft:2},children:["Reusable type",(0,l.jsx)(p.xu,{as:"p",sx:{fontSize:"12px",color:"textClear",mt:1},children:a.hintRepeatable})]})]}),(0,l.jsxs)(B,{selected:!n.value,onClick:()=>r.setValue(!1),children:[(0,l.jsx)(p.Y8,{checked:!n.value,onChange:()=>{},"data-testid":"single-type-radio-btn"}),(0,l.jsxs)(p.xu,{sx:{marginLeft:2},children:["Single type",(0,l.jsx)(p.xu,{as:"p",sx:{fontSize:"12px",color:"textClear",mt:1},children:a.hintSingle})]})]})]})},z=e=>{let{format:t,isCreating:n,isOpen:r,origin:a="table",onCreateChange:s,onOpenChange:i}=e,{createCustomTypeSuccess:o}=(0,T.Z)(),{completeStep:u}=(0,S.k)(),{customTypeIds:m,customTypeLabels:g}=(0,h.v9)(e=>({customTypeIds:(0,w.W6)(e),customTypeLabels:(0,w.YS)(e)})),f=d.$[t],[R,B]=(0,c.useState)(!0),{syncChanges:z}=(0,_.g)(),N=(0,x.useRouter)(),A=async e=>{let{id:n,label:l,repeatable:r}=e;s(!0),await v({format:t,id:n,label:l,origin:a,repeatable:r,onSuccess:async e=>{o(e);let t=(0,j.y6)(e),l=b.cd[t];B(!0),await N.push({pathname:l.getBuilderPagePathname(n)}),z(),"page"===t&&u("createPageType")}}),s(!1),i(!1)},E=(e,t,n)=>{n(R?{...t,label:e.target.value,id:(0,k.lV)(e.target.value)}:{...t,label:e.target.value})},P=(e,t)=>{t("id",e.target.value),B(!1)};return(0,l.jsx)(y.Z,{testId:"create-ct-modal",isOpen:r,widthInPx:"530px",formId:"create-custom-type",buttonLabel:"Create",close:()=>{i(!1),B(!0)},onSubmit:e=>{A(e)},isLoading:n,initialValues:{repeatable:!0,id:"",label:""},validate:e=>{let{id:t,label:n}=e,l={};return n&&n.length||(l.label="Cannot be empty."),!l.label&&g.includes(n)&&(l.label="".concat(f.name({start:!0,plural:!1})," name is already taken.")),["update","insert"].includes(n.toLowerCase())&&(l.label='Name "'.concat(n,'" is reserved for Slice Machine use.')),t&&t.length||(l.id="ID cannot be empty."),["update","insert"].includes(t.toLowerCase())&&(l.id='Id "'.concat(t,'" is reserved for Slice Machine use.')),l.id||!t||C.xo.exec(t)||(l.id="Invalid id: No special characters allowed."),!l.id&&t&&m.map(e=>e.toLowerCase()).includes(t)&&(l.id='ID "'.concat(t,'" exists already.')),Object.keys(l).length>0?l:void 0},content:{title:"Create a new ".concat(f.name({start:!1,plural:!1}))},children:e=>{let{errors:n,setValues:r,setFieldValue:a,values:s,touched:c}=e;return(0,l.jsxs)(p.xu,{children:[(0,l.jsx)(L,{format:t}),(0,l.jsx)(I.W,{name:"label",label:"".concat(f.name({start:!0,plural:!1})," Name"),testId:"ct-name-input",placeholder:"A display name for the ".concat(f.name({start:!1,plural:!1})),error:c.label?n.label:void 0,onChange:e=>E(e,s,r)}),(0,l.jsx)(I.W,{name:"id",testId:"ct-id-input",label:"".concat(f.name({start:!0,plural:!1})," ID"),placeholder:f.inputPlaceholder,error:c.id?n.id:void 0,onChange:e=>P(e,a)})]})}})};var N=n(28574);let A=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"m2 24h16c1.1046 0 2-.8954 2-2v-17l-5-5h-13c-1.10457 0-2 .89543-2 2v20c0 1.1046.89543 2 2 2z",fill:"#6e56cf"}),(0,l.jsx)("path",{d:"m17 5h3l-5-5v3c0 1.10457.8954 2 2 2z",fill:"#9e8cfc"}),(0,l.jsx)("path",{d:"m10.0912 8c-2.8118 0-5.0912 2.2794-5.0912 5.0912s2.2794 5.0912 5.0912 5.0912c1.8851 0 3.5303-1.0247 4.4098-2.5452.1553-.2684.2868-.5523.3916-.8489.092-.2604-.0444-.5461-.3048-.6381-.2603-.092-.546.0445-.638.3048-.0841.238-.1897.4659-.3144.6815-.7081 1.2241-2.0305 2.0459-3.5442 2.0459-2.2595 0-4.0912-1.8317-4.0912-4.0912s1.8317-4.0912 4.0912-4.0912c1.3566 0 2.5595.66 3.3043 1.6782h-1.7739c-.2761 0-.5.2239-.5.5 0 .2762.2239.5.5.5h2.6782c.2762 0 .5-.2238.5-.5v-2.6782c0-.2761-.2238-.5-.5-.5-.2761 0-.5.2239-.5.5v1.1032c-.9281-.9865-2.2462-1.6032-3.7086-1.6032z",fill:"#fff"})]}),E=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"m2 24h16c1.1046 0 2-.8954 2-2v-17l-5-5h-13c-1.10457 0-2 .89543-2 2v20c0 1.1046.89543 2 2 2z",fill:"#6e56cf",fillRule:"nonzero"}),(0,l.jsx)("path",{d:"m17 5h3l-5-5v3c0 1.10457.8954 2 2 2z",fill:"#9e8cfc",fillRule:"nonzero"}),(0,l.jsx)("path",{d:"m8.0869 10.6818.5758-2.3031c.0556-.2226.2556-.3787.485-.3787.3253 0 .564.3057.4851.6213l-.5151 2.0605h2.6055l.5758-2.3031c.0557-.2226.2557-.3787.4851-.3787.3253 0 .564.3057.4851.6213l-.5152 2.0605h2.246c.2761 0 .5.2239.5.5 0 .2762-.2239.5-.5.5h-2.496l-.6591 2.6364h2.1551c.2761 0 .5.2238.5.5 0 .2761-.2239.5-.5.5h-2.4051l-.5757 2.3031c-.0557.2226-.2557.3787-.4851.3787-.3253 0-.564-.3057-.4851-.6213l.5152-2.0605h-2.6056l-.5758 2.3031c-.0556.2226-.2556.3787-.4851.3787-.3253 0-.5639-.3057-.485-.6213l.5151-2.0605h-1.9278c-.2761 0-.5-.2239-.5-.5 0-.2762.2239-.5.5-.5h2.1778l.6591-2.6364h-1.8369c-.2761 0-.5-.2238-.5-.5 0-.2761.2239-.5.5-.5zm2.7273 3.6364.659-2.6364h-2.6055l-.6591 2.6364z",fill:"#fff"})]});var P=n(64910),D=n(18566),W=n(95799),$=n(1744),O=n(70647);async function M(e){let{errors:t,models:n}=await O.managerClient.customTypes.readAllCustomTypes({format:e});if(t.length>0)throw t;return n.map(e=>{let{model:t}=e;return t})}let V=e=>{let{format:t,isCreatingCustomType:n,openCreateCustomTypeModal:a}=e,s=(0,x.useRouter)(),{customTypes:i,updateCustomTypes:o}=function(e){let t=(0,c.useCallback)(t=>(0,D.VA)(M,[e],t),[e]);return{customTypes:(0,D.QT)(M,[e]),updateCustomTypes:t}}(t),u=i.sort((e,t)=>e.id.localeCompare(t.id)),p=b.cd[t],j=d.$[t];return(!function(e,t,n){let{storeCustomTypes:l}=(0,h.v9)(e=>({storeCustomTypes:(0,w.Ch)(e).filter($.TG)}));(0,c.useEffect)(()=>{let r=l.filter(e=>{let{local:n}=e;return n.format===t});(r.length!==e.length||r.some(t=>{let n=e.find(e=>e.id===t.local.id);return!n||JSON.stringify(W.Dc.fromSM(t.local))!==JSON.stringify(n)}))&&n(r.map(e=>{let{local:t}=e;return W.Dc.fromSM(t)}))},[t,n,e,l])}(i,t,o),0===u.length)?(0,l.jsxs)(N.R$,{"data-testid":"blank-slate",style:{alignSelf:"center",marginTop:r.rSc.space[72]},children:[(0,l.jsx)(N.u2,{children:(0,l.jsx)(r.Eep,{src:p.blankSlateImage,sizing:"cover"})}),(0,l.jsxs)(N.T9,{children:[(0,l.jsx)(N._T,{children:j.name({start:!0,plural:!0})}),(0,l.jsx)(N.nf,{children:j.blankSlateDescription}),(0,l.jsx)(N.Qj,{children:(0,l.jsx)(r.zxk,{onClick:a,loading:n,children:"Create"})})]})]}):(0,l.jsx)("div",{children:(0,l.jsxs)(r.iA_,{columnLayout:"28px 1fr 1fr 1fr 42px",children:[(0,l.jsx)(r.ssF,{children:(0,l.jsxs)(r.SCH,{children:[(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.JO$,{name:"notes",size:"medium"})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.xvT,{color:"grey11",variant:"small",children:"Label"})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.xvT,{color:"grey11",variant:"small",children:"API ID"})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.xvT,{color:"grey11",variant:"small",children:"Limit"})}),(0,l.jsx)(r.pj1,{})]})}),(0,l.jsx)(r.RMI,{children:u.map(e=>{let{repeatable:n,label:a,id:c}=e;return(0,l.jsxs)(r.SCH,{onClick:()=>{s.push(b.cd[t].getBuilderPagePathname(c))},children:[(0,l.jsx)(r.pj1,{children:n?(0,l.jsx)(A,{width:r.rSc.space[20]}):(0,l.jsx)(E,{width:r.rSc.space[20]})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.xvT,{variant:"bold",noWrap:!0,children:a})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.xvT,{color:"grey11",noWrap:!0,children:c})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(r.xvT,{color:"grey11",noWrap:!0,children:n?"Reusable":"Single"})}),(0,l.jsx)(r.pj1,{children:(0,l.jsx)(P._,{isChangesLocal:!1,format:t,customType:e})})]},c)})})]})})},Y=e=>{let{format:t}=e,n=d.$[t],[a,x]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s(),{children:(0,l.jsxs)("title",{children:[n.name({start:!0,plural:!0})," - Slice Machine"]})}),(0,l.jsx)(o.S,{renderError:()=>(0,l.jsx)(u.LN,{children:(0,l.jsx)(u.RN,{children:(0,l.jsx)(r.xuv,{alignItems:"center",justifyContent:"center",children:(0,l.jsx)(r.Iq8,{title:"Request failed",description:"An error occurred while fetching your ".concat(n.name({start:!1,plural:!0}),".")})})})}),children:(0,l.jsx)(c.Suspense,{fallback:(0,l.jsxs)(u.LN,{children:[(0,l.jsxs)(u.wd,{children:[(0,l.jsx)(u.Cx,{children:(0,l.jsx)(i.g,{children:n.name({start:!0,plural:!0})})}),(0,l.jsx)(u.K2,{children:(0,l.jsx)(r.zxk,{disabled:!0,startIcon:"add",children:"Create"})})]}),(0,l.jsx)(u.RN,{children:(0,l.jsx)(r._3P,{})})]}),children:(0,l.jsxs)(u.LN,{children:[(0,l.jsxs)(u.wd,{children:[(0,l.jsx)(u.Cx,{children:(0,l.jsx)(i.g,{children:n.name({start:!0,plural:!0})})}),(0,l.jsx)(u.K2,{children:(0,l.jsx)(r.zxk,{"data-testid":"create-ct",loading:a,onClick:()=>{p(!0)},startIcon:"add",children:"Create"})})]}),(0,l.jsx)(u.RN,{children:(0,l.jsxs)(r.xuv,{flexDirection:"column",children:[(0,l.jsx)(V,{format:t,isCreatingCustomType:a,openCreateCustomTypeModal:()=>{p(!0)}}),(0,l.jsx)(z,{format:t,isCreating:a,isOpen:h,onCreateChange:x,onOpenChange:p})]})})]})})})]})}},76805:function(e,t,n){"use strict";n.d(t,{Z:function(){return o},W:function(){return i}});var l=n(52322),r=n(2784),a=n(75289);let s=e=>{let{bg:t,background:n,sx:r,withRadius:s,radius:c,children:i}=e;return(0,l.jsx)(a.xu,{sx:{p:4,bg:t||n,...s?{borderBottomLeftRadius:c,borderBottomRightRadius:c}:null,...r},children:i})},c=(0,r.createContext)("6px"),i=()=>(0,r.useContext)(c),o=e=>{let{Header:t=null,SubHeader:n=null,Body:r=null,Footer:i=null,borderFooter:o=!1,radius:d="6px",bodySx:u={},footerSx:x={},sx:h=null,bg:p,background:j,children:m,...g}=e;return(0,l.jsx)(c.Provider,{value:d,children:(0,l.jsxs)(a.Zb,{sx:{border:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.borders))},borderRadius:d,...h},...g,children:[t||null,n||null,(0,l.jsxs)(s,{bg:p,background:j,sx:u,withRadius:!i,children:[r?(0,l.jsx)(r,{}):null,m||null]}),i?(0,l.jsx)(s,{bg:p,background:j,sx:{...o?{borderTop:e=>{let{colors:t}=e;return"1px solid ".concat(String(null==t?void 0:t.borders))}}:null,...x},radius:d,withRadius:!0,children:"object"==typeof i?i:(0,l.jsx)(i,{})}):null]})})}},17186:function(e,t,n){"use strict";n.d(t,{Sn:function(){return c},lS:function(){return l},nG:function(){return r},pq:function(){return i},rd:function(){return s},xo:function(){return a}});let l=["components","update","insert"],r=["png","jpg","jpeg"],a=/^[A-Za-z0-9]+(?:_[A-Za-z0-9]+)*$/,s="placeholders/What_are_Slices_mrvome",c="SM_HELP_VIDEOS/mock_data",i="slice-machine-simulator"},43217:function(e){e.exports={column:"BlankSlate_column__genEe",root:"BlankSlate_root__CmSqW BlankSlate_column__genEe",fadeIn:"BlankSlate_fadeIn__mAfi5",withBackground:"BlankSlate_withBackground__mLYij",image:"BlankSlate_image__Jn90S BlankSlate_column__genEe",content:"BlankSlate_content__0Yt2d BlankSlate_column__genEe",desc:"BlankSlate_desc___Dl7e",actions:"BlankSlate_actions__OYRj4"}}}]);